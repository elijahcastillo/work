{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport { useAppContext } from \"../context/appContext\";\n\nconst ProtectedRoute = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n  let navigate = useNavigate();\n  const {\n    isAuthenticated,\n    token,\n    verifyToken\n  } = useAppContext();\n  const [auth, setAuth] = useState(false);\n  useEffect(() => {\n    console.log(auth, \"BEFORE\");\n    setAuth(isAuthenticated);\n    console.log(auth, \"AFTER 1st\");\n\n    const persist = async () => {\n      const p_token = localStorage.getItem(\"token\");\n\n      if (!p_token) {\n        console.log(\"NOOOO TTTTT\");\n        return;\n      }\n\n      const isP = await verifyToken(p_token);\n      console.log(isP, \"POP\");\n\n      if (isP) {\n        setAuth(true);\n      }\n    };\n\n    persist();\n    console.log(auth, \"AFTER PERS\");\n\n    if (!auth) {\n      console.log(auth, \"PROTEC ROUTE\");\n      return navigate(\"/login\");\n    }\n  }, [auth]);\n  return children;\n};\n\n_s(ProtectedRoute, \"S1g8bBc36PMqRFymV+652vuPl4w=\", false, function () {\n  return [useNavigate, useAppContext];\n});\n\n_c = ProtectedRoute;\nexport default ProtectedRoute;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProtectedRoute\");","map":{"version":3,"sources":["C:/Users/escbe/Desktop/Code/React/Pern Auth Login/client/src/components/ProtectedRoute.js"],"names":["React","useState","useEffect","useNavigate","useAppContext","ProtectedRoute","children","navigate","isAuthenticated","token","verifyToken","auth","setAuth","console","log","persist","p_token","localStorage","getItem","isP"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,QAAhB,EAA0BC,SAA1B,QAA2C,OAA3C;AACA,SAASC,WAAT,QAA4B,kBAA5B;AACA,SAASC,aAAT,QAA8B,uBAA9B;;AAEA,MAAMC,cAAc,GAAG,QAAkB;AAAA;;AAAA,MAAjB;AAAEC,IAAAA;AAAF,GAAiB;AACvC,MAAIC,QAAQ,GAAGJ,WAAW,EAA1B;AACA,QAAM;AAAEK,IAAAA,eAAF;AAAmBC,IAAAA,KAAnB;AAA0BC,IAAAA;AAA1B,MAA0CN,aAAa,EAA7D;AAEA,QAAM,CAACO,IAAD,EAAOC,OAAP,IAAkBX,QAAQ,CAAC,KAAD,CAAhC;AAEAC,EAAAA,SAAS,CAAC,MAAM;AACdW,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,QAAlB;AACAC,IAAAA,OAAO,CAACJ,eAAD,CAAP;AACAK,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,WAAlB;;AAEA,UAAMI,OAAO,GAAG,YAAY;AAC1B,YAAMC,OAAO,GAAGC,YAAY,CAACC,OAAb,CAAqB,OAArB,CAAhB;;AACA,UAAI,CAACF,OAAL,EAAc;AACZH,QAAAA,OAAO,CAACC,GAAR,CAAY,aAAZ;AACA;AACD;;AAED,YAAMK,GAAG,GAAG,MAAMT,WAAW,CAACM,OAAD,CAA7B;AACAH,MAAAA,OAAO,CAACC,GAAR,CAAYK,GAAZ,EAAiB,KAAjB;;AACA,UAAIA,GAAJ,EAAS;AACPP,QAAAA,OAAO,CAAC,IAAD,CAAP;AACD;AACF,KAZD;;AAaAG,IAAAA,OAAO;AAEPF,IAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,YAAlB;;AACA,QAAI,CAACA,IAAL,EAAW;AACTE,MAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ,EAAkB,cAAlB;AACA,aAAOJ,QAAQ,CAAC,QAAD,CAAf;AACD;AACF,GAzBQ,EAyBN,CAACI,IAAD,CAzBM,CAAT;AA2BA,SAAOL,QAAP;AACD,CAlCD;;GAAMD,c;UACWF,W,EACiCC,a;;;KAF5CC,c;AAoCN,eAAeA,cAAf","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport { useNavigate } from \"react-router-dom\";\r\nimport { useAppContext } from \"../context/appContext\";\r\n\r\nconst ProtectedRoute = ({ children }) => {\r\n  let navigate = useNavigate();\r\n  const { isAuthenticated, token, verifyToken } = useAppContext();\r\n\r\n  const [auth, setAuth] = useState(false);\r\n\r\n  useEffect(() => {\r\n    console.log(auth, \"BEFORE\");\r\n    setAuth(isAuthenticated);\r\n    console.log(auth, \"AFTER 1st\");\r\n\r\n    const persist = async () => {\r\n      const p_token = localStorage.getItem(\"token\");\r\n      if (!p_token) {\r\n        console.log(\"NOOOO TTTTT\");\r\n        return;\r\n      }\r\n\r\n      const isP = await verifyToken(p_token);\r\n      console.log(isP, \"POP\");\r\n      if (isP) {\r\n        setAuth(true);\r\n      }\r\n    };\r\n    persist();\r\n\r\n    console.log(auth, \"AFTER PERS\");\r\n    if (!auth) {\r\n      console.log(auth, \"PROTEC ROUTE\");\r\n      return navigate(\"/login\");\r\n    }\r\n  }, [auth]);\r\n\r\n  return children;\r\n};\r\n\r\nexport default ProtectedRoute;\r\n"]},"metadata":{},"sourceType":"module"}